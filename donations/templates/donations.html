</script><!DOCTYPE html>
{% load static %}
 <html lang="en">
 <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">

      

     <title>Donate if you like our resources!</title>
     
 </head>
 <body>
     {% block content %}
     <div class="jumbotron">
         <h1>Donate if you like our resources</h1>
         <a href="" id="buy_now_btn" class="btn btn-primary">Donate now</a>
     </div>

     {% endblock %}

<script src="https://js.stripe.com/v3/"></script>
<script type="text/javascript">
      // Create an instance of the Stripe object with your publishable API key
    
    const checkoutButton = document.querySelector('#buy_now_btn')


    checkoutButton.addEventListener('click', event => {
        fetch('/checkout/')
        .then((result) => {return result.json() })
        .then((data) => {
            var stripe = Stripe(data.stripe_public_key);


            stripe.redirectToCheckout({ 
            sessionId: data.session_id
        }).then(function (result) {
          // If `redirectToCheckout` fails due to a browser or network
          // error, you should display the localized error message to your
          // customer using `error.message`. 
        });
    })
    })
</script>
     
 </body>
 </html>
