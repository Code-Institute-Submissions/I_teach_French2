
<!DOCTYPE html>
{% extends "base.html" %}
{% load static %}

 <html lang="en">
 <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Donate if you like our resources!</title>
     
 </head>
 <body>
     {% block content %}
     <div class="container fluid" id="donate">
         <h3>Donate if you like our resources</h3>
         <a href="" id="buy_now_btn" class="btn btn-primary">Donate now</a>
     </div>

     {% endblock %}

{% block postloadjs %}
<script src="https://js.stripe.com/v3/"></script>
<script type="text/javascript">
    var stripe = Stripe('{{ stripe_public_key }}');

    const checkoutButton = document.querySelector('#buy_now_btn')
    
    checkoutButton.addEventListener('click', event => {
            stripe.redirectToCheckout({ 
            sessionId: '{{ session_id }}'
        }).then(function (result) {
          // If `redirectToCheckout` fails due to a browser or network
          // error, you should display the localized error message to your
          // customer using `error.message`. 
        });
    })
</script>
{% endblock %}

 </body>
 </html>
